# オナ禁サポートAI Webサービス 要件定義書

## 1. プロジェクト概要

### 1.1 目的
オナ禁（NoFap）をサポートするための個人専用AI Webアプリケーション。ユーザーの継続を支援し、成功を可視化する。

### 1.2 技術スタック
- **フレームワーク**: Next.js (App Router)
- **データベース**: Turso
- **認証**: BetterAuth
- **その他**: AI機能（実装方法は要検討）

### 1.3 制約事項
- 個人専用アプリ（販売予定なし）
- 決済機能は不要
- 通知機能は不要

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 日数カウンター
- **説明**: オナ禁を継続している日数を表示する機能
- **優先度**: 最高（メイン機能）
- **表示内容**:
  - 現在のストリーク日数
  - 最長記録日数
  - 励ましのメッセージ

#### 2.1.2 カレンダー機能
- **説明**: 日々の成功/失敗を視覚的に表示
- **優先度**: 高
- **表示仕様**:
  - 青丸: オナ禁成功した日
  - 赤丸: オナ禁に失敗した日
- **機能**:
  - 日付をクリックして成功/失敗を記録
  - 月次/年次ビュー

#### 2.1.3 日記・反省機能
- **説明**: 一日の振り返りや反省を記録
- **優先度**: 高
- **機能**:
  - 日記の入力・編集・削除
  - 日付ごとの日記閲覧
  - 感情や状況の記録（オプション）

#### 2.1.4 モテ度メーター
- **説明**: オナ禁継続による効果を可視化
- **優先度**: 中
- **機能**:
  - 日数に応じたモテ度の表示
  - 視覚的なメーター表示

### 2.2 AI機能

#### 2.2.1 相談・メンタルケア
- **説明**: ユーザーの悩みや相談にAIが応答
- **優先度**: 高
- **機能**:
  - チャット形式での相談
  - 励ましのメッセージ
  - メンタルサポート

#### 2.2.2 代替行動の提案
- **説明**: 誘惑を感じた際の代替行動をAIが提案
- **優先度**: 中
- **機能**:
  - 状況に応じた行動提案
  - 健康的な代替活動の推奨

#### 2.2.3 アドバイス・緊急時の警告
- **説明**: リスク状況を検知し、適切なアドバイスや警告を提供
- **優先度**: 高
- **機能**:
  - 危険な状況の検知
  - 緊急時の警告メッセージ
  - 予防的なアドバイス

## 3. データ要件

### 3.1 データベース設計（概要）

#### 3.1.1 保存データ
- ユーザー情報（認証情報）
- 日数カウンター（ストリーク情報）
- カレンダー記録（日付ごとの成功/失敗）
- 日記データ
- モテ度メーターの状態
- AIとの会話履歴（オプション）

#### 3.1.2 データベース
- **種類**: Turso
- **要件**: アプリ内のすべてのデータを保存

### 3.2 データ保持
- すべてのデータを永続的に保存
- 削除機能はユーザーが明示的に実行した場合のみ

## 4. 認証・セキュリティ要件

### 4.1 認証
- **実装**: BetterAuth
- **要件**: ユーザー認証は必須
- **機能**:
  - ログイン/ログアウト
  - アカウント管理

### 4.2 プライバシー
- 特に特別な要件なし
- 標準的なセキュリティ対策を実施

## 5. UI/UX要件

### 5.1 デザイン原則
- **メイン画面**: 日数カウンターを中心とした設計
- **目的**: オナ禁を成功させるために徹底されたUI/UX
- **要素**:
  - 励ましの言葉を適切に配置
  - 視覚的にわかりやすいデザイン
  - モチベーションを維持できるインターフェース

### 5.2 画面構成（想定）
1. **ダッシュボード（メイン画面）**
   - 日数カウンター（大きく表示）
   - 励ましのメッセージ
   - モテ度メーター
   - カレンダー（ミニビュー）

2. **カレンダー画面**
   - 月次カレンダー表示
   - 成功/失敗の記録

3. **日記画面**
   - 日記一覧
   - 日記入力・編集

4. **AIチャット画面**
   - チャットインターフェース
   - 相談・アドバイス機能

## 6. 非機能要件

### 6.1 パフォーマンス
- ページ読み込み速度の最適化
- データ取得の効率化

### 6.2 可用性
- 個人専用のため、高可用性は必須ではないが、基本的な安定性は確保

### 6.3 通知機能
- **要件**: 不要（実装しない）

## 7. 実装優先順位

### Phase 1（MVP）
1. 認証機能（BetterAuth）
2. 日数カウンター
3. カレンダー機能（基本）
4. データベース設計・実装（Turso）

### Phase 2
5. 日記機能
6. AI機能（基本）

### Phase 3
7. モテ度メーター
8. AI機能（高度な機能）
9. UI/UXの最適化

## 8. 今後の検討事項

- AI機能の実装方法（OpenAI API、ローカルモデルなど）
- モテ度メーターの計算ロジック
- カレンダーの詳細仕様（時間記録など）
- データエクスポート機能の必要性
- レスポンシブデザインの詳細要件

